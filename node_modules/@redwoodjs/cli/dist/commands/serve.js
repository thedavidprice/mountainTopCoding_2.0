"use strict";

var _Object$defineProperty = require("@babel/runtime-corejs3/core-js/object/define-property");

var _interopRequireDefault = require("@babel/runtime-corejs3/helpers/interopRequireDefault");

_Object$defineProperty(exports, "__esModule", {
  value: true
});

exports.handler = exports.builder = exports.description = exports.command = void 0;

var _terminalLink = _interopRequireDefault(require("terminal-link"));

var _apiServer = require("@redwoodjs/api-server");

const command = 'serve [side]';
exports.command = command;
const description = 'Run server for api in production'; // @NOTE if/when we add more sides
// We might want to structure this like packages/cli/src/redwood-tools.js
// With each side as a command, rather than a side positional

exports.description = description;

const builder = yargs => {
  yargs.options(_apiServer.cliOptions).positional('side', {
    default: 'api',
    description: 'Which server to start',
    type: 'string'
  }).epilogue(`Also see the ${(0, _terminalLink.default)('Redwood CLI Reference', 'https://redwoodjs.com/reference/command-line-interface#serve')}`);
};

exports.builder = builder;

const handler = async ({
  side = 'api',
  ...otherOptions
}) => {
  // Currently we only support api anyway
  // Not sure if we will support web in the future
  if (side === 'api') {
    (0, _apiServer.handler)(otherOptions);
  }
};

exports.handler = handler;