"use strict";

var _Object$defineProperty = require("@babel/runtime-corejs3/core-js/object/define-property");

var _interopRequireDefault = require("@babel/runtime-corejs3/helpers/interopRequireDefault");

_Object$defineProperty(exports, "__esModule", {
  value: true
});

exports.navigate = exports.gHistory = void 0;

var _now = _interopRequireDefault(require("@babel/runtime-corejs3/core-js/date/now"));

var _values = _interopRequireDefault(require("@babel/runtime-corejs3/core-js/object/values"));

const createHistory = () => {
  const listeners = {};
  return {
    listen: listener => {
      const listenerId = 'RW_HISTORY_LISTENER_ID_' + (0, _now.default)();
      listeners[listenerId] = listener;
      global.addEventListener('popstate', listener);
      return listenerId;
    },
    navigate: to => {
      global.history.pushState({}, '', to);

      for (const listener of (0, _values.default)(listeners)) {
        listener();
      }
    },
    remove: listenerId => {
      if (listeners[listenerId]) {
        const listener = listeners[listenerId];
        global.removeEventListener('popstate', listener);
        delete listeners[listenerId];
      } else {
        console.warn('History Listener with ID: ' + listenerId + ' does not exist.');
      }
    }
  };
};

const gHistory = createHistory();
exports.gHistory = gHistory;
const navigate = gHistory.navigate;
exports.navigate = navigate;